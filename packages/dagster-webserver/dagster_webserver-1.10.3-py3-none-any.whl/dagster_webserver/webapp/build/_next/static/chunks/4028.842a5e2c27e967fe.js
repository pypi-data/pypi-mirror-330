"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4028],{5242:function(e,t,i){i.d(t,{p:function(){return y}});var r=i(52322),n=i(3217),s=i(82422),l=i(18984),o=i(26834),a=i(12597),d=i(28879),c=i.n(d),u=i(77491),h=i.n(u),x=i(2784),p=i(35505),m=i(96586),j=i(47793),g=i(84991);c().extend(h());let v={[g.izS.SUCCESS]:n.fA(),[g.izS.FAILURE]:n.FY(),[g.izS.STARTED]:n.v4(),[g.izS.SKIPPED]:n.A8()},f={[g.izS.SUCCESS]:n.Lv(),[g.izS.FAILURE]:n.MP(),[g.izS.STARTED]:n.Jq(),[g.izS.SKIPPED]:n.$l()},y=e=>{let{ticks:t,tickResultType:i,onHoverTick:n,onSelectTick:a,exactRange:d,timeRange:c=3e5,tickGrid:u=6e4,timeAfter:h=6e4}=e,[p,g]=(0,x.useState)(Date.now()),[v,f]=(0,x.useState)(!1);(0,x.useEffect)(()=>{if(!v&&!d){let e=setInterval(()=>{g(Date.now())},100);return()=>clearInterval(e)}return()=>{}},[d,v]);let y=(null==d?void 0:d[1])?1e3*d[1]:p+h,I=(null==d?void 0:d[0])?1e3*d[0]:p-c,A=I<p&&p<y,R=y-I,{viewport:P,containerProps:L}=(0,s.S)(),O=(0,x.useMemo)(()=>t.filter(e=>!e.endTimestamp||1e3*e.endTimestamp>I).reverse(),[t,I]),M=(0,x.useMemo)(()=>O.map((e,t)=>{var i,r;let n=(i=1e3*e.timestamp,P.width*(i-I)/R),s=(r=(0,j.g6)(e,O.length-t-1)?e.timestamp:e.endTimestamp?1e3*e.endTimestamp:p,P.width*(r-I)/R);return{...e,width:Math.max(s-n,8),startX:n}}),[I,p,O,R,P.width]),N=Math.max((y-I)/25,u)/5,$=Math.ceil(I/N)*N,_=Math.ceil((y-$)/N),q=Math.ceil(_/5),B=(0,x.useMemo)(()=>{let e=[];for(let t=0;t<_;t++){let i=$+t*N;e.push({time:i,x:P.width*(i-I)/R,showLabel:t%q==0})}return e},[_,$,N,P.width,I,R,q]);return(0,r.jsx)("div",{style:{marginRight:"8px"},children:(0,r.jsxs)("div",{...L,children:[(0,r.jsxs)(b,{children:[B.map(e=>(0,r.jsxs)(C,{style:{transform:"translateX(".concat(e.x,"px)")},children:[(0,r.jsx)(E,{}),e.showLabel?(0,r.jsx)(T,{children:(0,r.jsx)(l.YS,{children:(0,r.jsx)(m.E,{timestamp:{ms:e.time},timeFormat:{showSeconds:!0}})})}):null]},e.time)),M.map(e=>{var t,s;let l=null!==(s="materializations"!==i&&"runIds"in e?null===(t=e.runIds)||void 0===t?void 0:t.length:e.requestedAssetMaterializationCount)&&void 0!==s?s:0;return(0,r.jsx)(S,{style:{transform:"translateX(".concat(e.startX,"px)"),width:"".concat(e.width,"px")},status:e.status,onMouseEnter:()=>{n(e),f(!0)},onMouseLeave:()=>{n(),f(!1)},onClick:()=>{a(e)},children:(0,r.jsx)(o.u,{content:(0,r.jsx)(w,{tick:e,tickResultType:i}),children:(0,r.jsx)("div",{style:{width:e.width+"px",height:"80px"},children:l>0?l:null})})},e.id)}),A?(0,r.jsx)(z,{style:{transform:"translateX(".concat(P.width*(p-I)/R,"px)")}}):null]}),(0,r.jsx)(k,{})]})})},w=(0,x.memo)(e=>{let{tick:t,tickResultType:i}=e,s=(0,x.useMemo)(()=>{var e,r;return t.status===g.izS.FAILURE?"Evaluation failed":t.status===g.izS.STARTED?"Evaluating…":"materializations"!==i&&"runs"in t?"".concat((null===(e=t.runs)||void 0===e?void 0:e.length)||0," run").concat((0,a.I)(null===(r=t.runs)||void 0===r?void 0:r.length,"","s")," requested"):"".concat(t.requestedAssetMaterializationCount," materialization").concat((0,a.I)(t.requestedAssetMaterializationCount,"","s")," requested")},[t,i]),o=c()(1e3*t.timestamp),d=c()(t.endTimestamp?1e3*t.endTimestamp:Date.now()),u=o.to(d,!0);return(0,r.jsxs)("div",{children:[(0,r.jsx)(l.YS,{as:"div",children:(0,r.jsx)(m.E,{timestamp:{unix:t.timestamp},timeFormat:{showSeconds:!0}})}),(0,r.jsxs)(l.YS,{as:"div",children:[s," (",u,")"]}),t.status===g.izS.STARTED?null:(0,r.jsx)(l.YS,{color:n.$(),children:"Click for details"})]})}),b=p.ZP.div.withConfig({componentId:"sc-93f8c965-0"})(["position:relative;height:100px;padding:10px 2px;border-bottom:1px solid ",";"],n.wL()),k=p.ZP.div.withConfig({componentId:"sc-93f8c965-1"})(["height:24px;"]),S=p.ZP.div.withConfig({componentId:"sc-93f8c965-2"})(["cursor:pointer;position:absolute;top:10px;height:80px;will-change:transform,width;border-radius:2px;div{place-content:center;display:grid;}color:",";",""],n.v8(),e=>{let{status:t}=e;return"\n    background: ".concat(v[t],";\n    &:hover {\n      background: ").concat(f[t],";\n    }\n  ")}),C=p.ZP.div.withConfig({componentId:"sc-93f8c965-3"})(["position:absolute;top:0;height:124px;will-change:transform;"]),E=p.ZP.div.withConfig({componentId:"sc-93f8c965-4"})(["position:absolute;top:0;height:108px;width:1px;background:",";"],n.wL()),T=p.ZP.div.withConfig({componentId:"sc-93f8c965-5"})(["height:16px;position:absolute;bottom:0;width:100px;margin-left:-24px;"]),z=p.ZP.div.withConfig({componentId:"sc-93f8c965-6"})(["position:absolute;top:0;height:126px;width:2px;background:",";&:after{content:'Now';position:absolute;left:0;background:",";color:",";bottom:0;font-size:12px;padding:3px 4px;}"],n.Bj(),n.Bj(),n.KH())},47793:function(e,t,i){i.d(t,{g6:function(){return n},sw:function(){return s}});var r=i(84991);function n(e,t){return!e.endTimestamp&&(0!==t&&e.status===r.izS.STARTED||1e3*e.timestamp<Date.now()-259200)}function s(e,t){return e.reduce((e,i)=>{if(i.type===t){var r;return e+((null===(r=i.partitionKeys)||void 0===r?void 0:r.length)||0)}return e},0)}},94028:function(e,t,i){i.r(t),i.d(t,{OverviewRoot:function(){return tO},default:function(){return tM}});var r,n,s=i(52322),l=i(7267),o=i(94466),a=i(48177),d=i(2784),c=i(74741),u=i(50683),h=i(97077),x=i(82422),p=i(37577),m=i(54854),j=i(3217),g=i(78401),v=i(60206),f=i(18984),y=i(88510),w=i(47933),b=i(35505),k=i(34515),S=i(98933),C=i(96798),E=i(43251),T=i(34970),z=i(9628),I=i(52027),A=i(47121),R=i(36386),P=i(55638),L=i(93781),O=i(22710),M=i(63385),N=i(97373),$=i(91987),_=i(18328);let q=e=>{let{Header:t,TabButton:i}=e;(0,C.Px)(),(0,L.j)("Overview | Assets");let{assets:r,query:n,error:l,loading:o}=(0,R.Zg)(),x=(0,S.bT)({refresh:n,intervalMs:S.dT,leading:!0}),p=d.useMemo(()=>r?function(e){let t={};return e.forEach(e=>{if(!e.definition)return;let i=e.definition.groupName,r=e.definition.repository.name,n="".concat(i,"||").concat(r),s=t[n]||{groupName:i,repositoryName:r,assets:[]};s.assets.push(e),t[n]=s}),Object.values(t)}(r):[],[r]),[m,j]=(0,O.q)({queryKey:"q",decode:e=>e.searchQuery?JSON.parse(e.searchQuery):"",encode:e=>({searchQuery:e?JSON.stringify(e):void 0})}),g=d.useMemo(()=>""===m?p:p.filter(e=>(e.groupName||U).toLowerCase().includes(m.toLowerCase())||e.repositoryName.toLowerCase().includes(m.toLowerCase())),[p,m]),v=d.useMemo(()=>{var e;return null!==(e=g.flatMap(e=>e.assets.map(e=>e.key)))&&void 0!==e?e:[]},[g]);(0,E.NY)(v,"OverviewAssetsRoot");let f=d.useRef(null),b=(0,y.MG)({count:g.length,getScrollElement:()=>f.current,estimateSize:()=>82,overscan:5}),T=b.getTotalSize(),z=b.getVirtualItems();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{style:{position:"sticky",top:0,zIndex:1},children:[(0,s.jsx)(t,{refreshState:x}),(0,s.jsxs)(a.x,{padding:{horizontal:24,vertical:16},flex:{alignItems:"center",gap:12,grow:0},children:[(0,s.jsx)(i,{selected:"assets"}),(0,s.jsx)(u.oi,{value:m,onChange:e=>{j(e.target.value)},placeholder:"Filter asset groups…"})]}),(0,s.jsx)(a.x,{padding:{horizontal:24,vertical:16},border:"top",children:(0,s.jsx)(h.b,{intent:"info",title:"This Assets tab will be removed in an upcoming release.",description:(0,s.jsxs)(s.Fragment,{children:["Use the ",(0,s.jsx)(w.rU,{to:"/asset-groups",children:"global asset lineage page"})," to view grouped asset status details."]})})})]}),o?(0,s.jsx)(a.x,{flex:{alignItems:"center",justifyContent:"center",direction:"column",grow:1},style:{width:"100%"},children:(0,s.jsx)(c.$,{purpose:"page"})}):l?(0,s.jsx)(a.x,{flex:{alignItems:"center",justifyContent:"center",direction:"column",grow:1},style:{width:"100%"},children:(0,s.jsx)(k.T9,{error:l})}):(0,s.jsx)(a.x,{flex:{direction:"column"},style:{overflow:"hidden"},children:(0,s.jsxs)(N.W2,{ref:f,children:[(0,s.jsx)(F,{}),(0,s.jsx)(N.Nh,{$totalHeight:T,children:z.map(e=>{let{index:t,key:i,size:r,start:n}=e,l=g[t];return(0,s.jsx)(D,{start:n,height:r,group:l},i)})})]})})]})},B="5fr 1fr 1fr 1fr 1fr",F=()=>(0,s.jsxs)(N.VJ,{templateColumns:B,sticky:!0,children:[(0,s.jsx)(N.qN,{children:"Group name"}),(0,s.jsx)(N.qN,{children:"Missing"}),(0,s.jsx)(N.qN,{children:"Failed/Overdue"}),(0,s.jsx)(N.qN,{children:"In progress"}),(0,s.jsx)(N.qN,{children:"Materialized"})]}),U="Ungrouped Assets";function D(e){var t,i;let{height:r,start:n,group:l}=e,o=d.useMemo(()=>l.assets.map(e=>({path:e.key.path})),[l.assets]),{liveDataByNode:u}=(0,E.NY)(o),h=d.useMemo(()=>(0,I.s)(l.assets,u),[u,l.assets]),g=null===(i=l.assets.find(e=>{var t;return null===(t=e.definition)||void 0===t?void 0:t.repository}))||void 0===i?void 0:null===(t=i.definition)||void 0===t?void 0:t.repository,v=(0,$.kQ)((null==g?void 0:g.name)||"",(null==g?void 0:g.location.name)||""),{containerProps:f,viewport:y}=(0,x.S)(),b=o.length!==Object.keys(u).length,k=b?"":"0";return(0,s.jsx)(N.X2,{$height:r,$start:n,children:(0,s.jsxs)(K,{border:"bottom",children:[(0,s.jsx)(J,{children:(0,s.jsxs)(a.x,{flex:{direction:"row",justifyContent:"space-between",grow:1},children:[(0,s.jsxs)(a.x,{flex:{direction:"column",gap:2,grow:1},children:[(0,s.jsxs)(a.x,{flex:{direction:"row",gap:8},children:[(0,s.jsx)(p.JO,{name:"asset_group"}),l.groupName?(0,s.jsx)(w.rU,{style:{fontWeight:700},to:(0,_.$U)(v,"/asset-groups/".concat(l.groupName)),children:l.groupName}):U]}),(0,s.jsx)("div",{...f,children:(0,s.jsx)(V,{maxWidth:y.width,children:(0,s.jsx)(M.b,{repoAddress:v,showRefresh:!1})})})]}),(0,s.jsx)(a.x,{flex:{direction:"column",justifyContent:"center"},children:b?(0,s.jsx)(c.$,{purpose:"body-text"}):null})]})}),(0,s.jsx)(J,{children:h.missing.length?(0,s.jsx)(Q,{assets:h.missing,getCount:e=>{let{status:t}=e;return t.case===T.KB.PARTITIONS_MISSING&&t.numMissing||0},adjective:"missing",children:(0,s.jsx)(m.V,{intent:"none",children:(0,s.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:6},children:[(0,s.jsx)("div",{style:{width:"12px",height:"12px",border:"2px solid ".concat(j.im()),borderRadius:"50%"}}),h.missing.length]})})}):k}),(0,s.jsx)(J,{children:h.failed.length?(0,s.jsx)(Q,{assets:h.failed,getCount:e=>{let{status:t}=e;return t.case===T.KB.PARTITIONS_FAILED&&t.numFailed||0},adjective:"failed",children:(0,s.jsx)(m.V,{intent:"danger",children:(0,s.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:6},children:[(0,s.jsx)("div",{style:{width:0,height:0,borderLeft:"6px solid transparent",borderRight:"6px solid transparent",borderBottom:"10px solid red",display:"inline-block"}}),h.failed.length]})})}):k}),(0,s.jsx)(J,{children:h.inprogress.length?(0,s.jsx)(Q,{assets:h.inprogress,getCount:e=>{let{status:t}=e;return t.case===T.KB.MATERIALIZING&&t.numMaterializing||0},adjective:"materializing",children:(0,s.jsx)(m.V,{intent:"primary",icon:"spinner",children:h.inprogress.length})}):k}),(0,s.jsx)(J,{children:h.successful.length?(0,s.jsx)(Q,{assets:h.successful,getCount:e=>{let{status:t}=e;return t.case===T.KB.PARTITIONS_MATERIALIZED&&t.numMaterialized||0},adjective:"materialized",children:(0,s.jsx)(m.V,{intent:"success",children:(0,s.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:6},children:[(0,s.jsx)("div",{style:{backgroundColor:j.fA(),width:"10px",height:"10px",borderRadius:"50%"}}),h.successful.length]})})}):k})]})})}let K=(0,b.ZP)(a.x).withConfig({componentId:"sc-9ca8ef04-0"})(["display:grid;grid-template-columns:",";height:100%;> *{vertical-align:middle;}"],B),J=e=>{let{children:t}=e;return(0,s.jsx)(N.E5,{style:{color:j.Ep()},children:(0,s.jsx)(a.x,{flex:{direction:"row",alignItems:"center",grow:1},children:t})})},V=b.ZP.div.withConfig({componentId:"sc-9ca8ef04-1"})(["font-size:12px;pointer-events:none;a{color:",";pointer-events:none;max-width:",";}"],j.$(),e=>{let{maxWidth:t}=e;return t?"unset":"".concat(t,"px")});function Q(e){let{assets:t,children:i,getCount:r,adjective:n}=e;return(0,s.jsx)(Z,{children:(0,s.jsx)(g.P,{items:t,itemPredicate:(e,t)=>(0,z.ll)(t.asset.key).toLocaleLowerCase().includes(e.toLocaleLowerCase()),itemRenderer:e=>{let t=r(e);return(0,s.jsx)(W,{to:(0,P.p)(e.asset.key),target:"_blank",children:(0,s.jsx)(v.sN,{text:(0,s.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:4},children:[(0,s.jsx)("div",{style:{paddingLeft:"4px"},children:(0,s.jsx)(p.JO,{name:"asset"})}),(0,s.jsx)("div",{style:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:(0,z.ll)(e.asset.key)}),t&&t>0?(0,s.jsxs)(f.YS,{style:{color:j.$()},children:[(0,A._e)(t)," ",n]}):null]})},(0,z.ll)(e.asset.key))})},onItemSelect:()=>{},children:i})})}let Z=b.ZP.div.withConfig({componentId:"sc-9ca8ef04-2"})(["cursor:pointer;&:hover{font-weight:600;}"]),W=(0,b.ZP)(w.rU).withConfig({componentId:"sc-9ca8ef04-3"})(["&:hover{text-decoration:none;}"]);var G=i(71018);let Y=()=>null;var H=i(44537),X=i(90025),ee=i(98828),et=i(73809),ei=i(74597);let er=e=>{let{refreshState:t,tab:i}=e,r=(0,et.dx)(),n=(0,ee.I)(),{enableAssetHealthOverviewPreview:l}=(0,d.useContext)(X.G);return(0,s.jsxs)(a.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"flex-end"},children:[(0,s.jsxs)(H.mQ,{selectedTabId:i,children:[(0,s.jsx)(ei.f,{id:"activity",title:"Timeline",to:"/overview/activity"}),l&&(0,s.jsx)(ei.f,{id:"asset-health",title:"Asset health",to:"/overview/asset-health"}),"has-global-amp"===n?(0,s.jsx)(ei.f,{id:"amp",title:(0,s.jsxs)(a.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,s.jsx)("div",{children:"Auto-materialize"}),r.loading?(0,s.jsx)(c.$,{purpose:"body-text"}):(0,s.jsx)("div",{style:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:!1===r.paused?j.L$():j.md()}})]}),to:"/overview/automation"}):null,(0,s.jsx)(ei.f,{id:"resources",title:"Resources",to:"/overview/resources"}),(0,s.jsx)(ei.f,{id:"backfills",title:"Backfills",to:"/overview/backfills"})]}),t?(0,s.jsx)(a.x,{style:{alignSelf:"center"},children:(0,s.jsx)(S.xi,{refreshState:t})}):null]})},en=e=>{let{tab:t,queryData:i,refreshState:r,...n}=e;return(0,s.jsx)(G.m,{tabs:(0,s.jsxs)(a.x,{flex:{direction:"column",gap:8},children:[(0,s.jsx)(er,{tab:t,queryData:i,refreshState:r}),(0,s.jsx)(Y,{})]}),...n})};var es=i(87189),el=i(98768),eo=i(57595),ea=i(51188);let ed=()=>{(0,L.j)("Overview | Activity");let e=d.useCallback(e=>{let{refreshState:t}=e;return(0,s.jsx)(en,{tab:"activity",refreshState:t})},[]),[t,i]=(0,eo.U)("overview-activity-tab",e=>["timeline","assets"].includes(e)?e:"timeline"),{enableAssetHealthOverviewPreview:r}=d.useContext(X.G),n=r?"timeline":t,c=d.useCallback(e=>{let{selected:t}=e;return r?null:(n!==t&&i(t),(0,s.jsxs)(o.zH,{children:[(0,s.jsx)(ea.Q1,{$active:"timeline"===t,to:"/overview/activity/timeline",children:"Timeline"}),(0,s.jsx)(ea.Q1,{$active:"assets"===t,to:"/overview/activity/assets",children:"Assets"})]}))},[n,i,r]);return(0,s.jsx)(a.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:(0,s.jsxs)(l.rs,{children:[!r&&(0,s.jsx)(el.A,{path:"/overview/activity/assets",children:(0,s.jsx)(q,{Header:e,TabButton:c})}),(0,s.jsx)(el.A,{path:"/overview/activity/timeline",children:(0,s.jsx)(es.U,{Header:e,TabButton:c})}),(0,s.jsx)(el.A,{path:"*",isNestingRoute:!0,render:d.useCallback(()=>"timeline"===n?(0,s.jsx)(l.l_,{to:"/overview/activity/timeline"}):(0,s.jsx)(l.l_,{to:"/overview/activity/assets"}),[n])})]})})};var ec=i(73235),eu=i(15997),eh=i(26834),ex=i(9774),ep=i(2636),em=i(41748);let ej="1.5fr 1fr 1fr",eg=e=>{let{name:t,description:i,repoAddress:r,start:n,height:l,resourceType:o,parentResources:d,jobsOpsUsing:c,assetKeysUsing:u,schedulesUsing:h,sensorsUsing:x}=e,m=(0,em.$)(o),g=d.length+c.length+u.length+h.length+x.length;return(0,s.jsx)(N.X2,{$height:l,$start:n,children:(0,s.jsxs)(ef,{border:"bottom",children:[(0,s.jsx)(N.E5,{children:(0,s.jsxs)(a.x,{flex:{direction:"column",gap:4},children:[(0,s.jsxs)(a.x,{flex:{direction:"row",gap:4,alignItems:"center"},children:[(0,s.jsx)(p.JO,{name:"resource",color:j.md()}),(0,s.jsx)("span",{style:{fontWeight:500},children:(0,s.jsx)(w.rU,{to:(0,_.$U)(r,"/resources/".concat(t)),children:(0,s.jsx)(ep.g,{text:t})})})]}),(0,s.jsx)("div",{style:{maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis"},children:(0,s.jsx)(f.YS,{style:{color:j.$(),whiteSpace:"nowrap"},children:i})})]})}),(0,s.jsx)(N.E5,{children:(0,s.jsx)(eh.u,{content:o,children:(0,s.jsx)(f.fv,{children:m})})}),(0,s.jsx)(N.E5,{children:(0,s.jsx)(w.rU,{to:(0,_.$U)(r,"/resources/".concat(t,"/uses")),children:g})})]})})},ev=()=>(0,s.jsxs)(N.VJ,{templateColumns:ej,sticky:!0,children:[(0,s.jsx)(N.qN,{children:"Name"}),(0,s.jsx)(N.qN,{children:"Type"}),(0,s.jsx)(N.qN,{children:"Uses"})]}),ef=(0,b.ZP)(a.x).withConfig({componentId:"sc-6af8490b-0"})(["display:grid;grid-template-columns:",";height:100%;"],ej);var ey=i(29134),ew=i(81942),eb=i(14500),ek=i(27450);let eS=e=>{let{repos:t}=e,i=(0,d.useRef)(null),r=(0,d.useMemo)(()=>t.map(e=>{let{repoAddress:t}=e;return(0,ek.Uz)(t)}),[t]),{expandedKeys:n,onToggle:l,onToggleAll:o}=(0,ew.N)(ex.y,r),a=(0,d.useMemo)(()=>{let e=[];return t.forEach(t=>{let{repoAddress:i,resources:r}=t;e.push({type:"header",repoAddress:i,resourceCount:r.length});let s=(0,ek.Uz)(i);n.includes(s)&&r.forEach(t=>{e.push({type:"resource",repoAddress:i,...t})})}),e},[t,n]),c=(0,ey.w)(t.map(e=>{let{repoAddress:t}=e;return t.name})),u=(0,y.MG)({count:a.length,getScrollElement:()=>i.current,estimateSize:e=>{let t=a[e];return(null==t?void 0:t.type)==="header"?32:64},overscan:10}),h=u.getTotalSize(),x=u.getVirtualItems();return(0,s.jsx)("div",{style:{overflow:"hidden"},children:(0,s.jsxs)(N.W2,{ref:i,children:[(0,s.jsx)(ev,{}),(0,s.jsx)(N.Nh,{$totalHeight:h,children:x.map(e=>{let{index:t,key:i,size:r,start:d}=e,u=a[t];return"header"===u.type?(0,s.jsx)(eb.vG,{repoAddress:u.repoAddress,height:r,start:d,onToggle:l,onToggleAll:o,expanded:n.includes((0,ek.Uz)(u.repoAddress)),showLocation:c.has(u.repoAddress.name),rightElement:(0,s.jsx)(eh.u,{content:1===u.resourceCount?"1 resource":"".concat(u.resourceCount," resources"),placement:"top",children:(0,s.jsx)(m.V,{children:u.resourceCount})})},i):(0,s.jsx)(eg,{height:r,start:d,...u},i)})})]})})};var eC=i(39916),eE=i(39282),eT=i(4760),ez=i(69752),eI=i(83891),eA=i(58926),eR=i(66135);let eP=e=>{let{tooltipContent:t}=e;return(0,eR.F)(2e3)?(0,s.jsx)(a.x,{margin:{top:1},children:(0,s.jsx)(eh.u,{placement:"top",canShow:!!t,content:t||"",children:(0,s.jsx)(c.$,{purpose:"body-text"})})}):null};var eL=i(8282);function eO(){let e=(0,ec._)(["\n  query OverviewResourcesQuery {\n    workspaceOrError {\n      ... on Workspace {\n        id\n        locationEntries {\n          id\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                allTopLevelResourceDetails {\n                  id\n                  ...ResourceEntryFragment\n                }\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return eO=function(){return e},e}let eM=()=>{(0,C.Px)(),(0,L.j)("Overview | Resources");let{allRepos:e,visibleRepos:t,loading:i,data:r}=(0,d.useContext)(eL.C5),[n,l]=(0,O.q)({queryKey:"search",defaults:{search:""}}),o=e.length,h=(0,eT.aM)(e$,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}),{data:x,loading:p}=h,m=(0,S.C4)(h,S.dT),g=(0,d.useMemo)(()=>{let e=(0,eE.S)(t),i=Object.values(r).filter(e=>"WorkspaceLocationEntry"===e.__typename),n=null==x?void 0:x.workspaceOrError;return eN((null==n?void 0:n.__typename)==="Workspace"?n.locationEntries:i).filter(t=>{let{repoAddress:i}=t;return e.has((0,ek.Uz)(i))})},[r,x,t]),v=!x&&p&&i,f=n.trim().toLocaleLowerCase(),y=f.length>0,w=(0,d.useMemo)(()=>{let e=f.toLocaleLowerCase();return g.map(t=>{let{repoAddress:i,resources:r}=t;return{repoAddress:i,resources:r.filter(t=>{let{name:i}=t;return i.toLocaleLowerCase().includes(e)})}}).filter(e=>{let{resources:t}=e;return t.length>0})},[g,f]),b=p&&!x;return(0,s.jsxs)(a.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,s.jsx)(en,{tab:"resources",refreshState:m}),(0,s.jsxs)(a.x,{padding:{horizontal:24,vertical:16},flex:{direction:"row",alignItems:"center",gap:12,grow:0},children:[o>1?(0,s.jsx)(eI.C,{}):null,(0,s.jsx)(u.oi,{icon:"search",value:n,rightElement:b?(0,s.jsx)(eP,{tooltipContent:"Loading resources…"}):void 0,onChange:e=>l(e.target.value),placeholder:"Filter by resource name…",style:{width:"340px"}})]}),v&&!o?(0,s.jsx)(a.x,{padding:64,children:(0,s.jsx)(c.$,{purpose:"page"})}):(()=>{if(v)return(0,s.jsx)(a.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,s.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,s.jsx)(c.$,{purpose:"body-text"}),(0,s.jsx)("div",{style:{color:j.$()},children:"Loading resources…"})]})});let i=e.length>t.length;return w.length?(0,s.jsx)(eS,{repos:w}):y?(0,s.jsx)(a.x,{padding:{top:20},children:(0,s.jsx)(eu.t,{icon:"search",title:"No matching resources",description:i?(0,s.jsxs)("div",{children:["No resources matching ",(0,s.jsx)("strong",{children:n})," were found in the selected code locations"]}):(0,s.jsxs)("div",{children:["No resources matching ",(0,s.jsx)("strong",{children:n})," were found in your definitions"]})})}):(0,s.jsx)(a.x,{padding:{top:20},children:(0,s.jsx)(eu.t,{icon:"search",title:"No resources",description:i?"No resources were found in the selected code locations":"No resources were found in your definitions"})})})()]})},eN=e=>{let t=e.map(e=>e.locationOrLoadError),i=[];for(let e of t)if((null==e?void 0:e.__typename)==="RepositoryLocation")for(let t of e.repositories){let{name:r,allTopLevelResourceDetails:n}=t,s=(0,$.kQ)(r,e.name);n.length>0&&i.push({repoAddress:s,resources:n})}return(0,eC.S)(i)},e$=(0,eT.Ps)(eO(),ez.B,eA.L);var e_=i(8637),eq=i(86587),eB=i(58351),eF=i(35025);function eU(){let e=(0,ec._)(["\n  fragment AssetDaemonTickFragment on InstigationTick {\n    id\n    timestamp\n    endTimestamp\n    status\n    instigationType\n    error {\n      ...PythonErrorFragment\n    }\n    requestedAssetKeys {\n      path\n    }\n    requestedAssetMaterializationCount\n    autoMaterializeAssetEvaluationId\n    requestedMaterializationsForAssets {\n      assetKey {\n        path\n      }\n      partitionKeys\n    }\n  }\n\n  ","\n"]);return eU=function(){return e},e}function eD(){let e=(0,ec._)(["\n  query AssetDaemonTicksQuery(\n    $dayRange: Int\n    $dayOffset: Int\n    $statuses: [InstigationTickStatus!]\n    $limit: Int\n    $cursor: String\n    $beforeTimestamp: Float\n    $afterTimestamp: Float\n  ) {\n    autoMaterializeTicks(\n      dayRange: $dayRange\n      dayOffset: $dayOffset\n      statuses: $statuses\n      limit: $limit\n      cursor: $cursor\n      beforeTimestamp: $beforeTimestamp\n      afterTimestamp: $afterTimestamp\n    ) {\n      id\n      ...AssetDaemonTickFragment\n    }\n  }\n\n  ","\n"]);return eD=function(){return e},e}let eK=(0,eT.Ps)(eU(),ez.B),eJ=(0,eT.Ps)(eD(),eK);var eV=i(39361),eQ=i(96586),eZ=i(84991),eW=i(45511),eG=i(6891),eY=i(1801);let eH=(0,d.memo)(e=>{let{tick:t,isOpen:i,close:r}=e;return(0,s.jsx)(eY.Vm,{isOpen:i,setIsOpen:r,height:400,header:(0,s.jsx)(eV.fK,{label:t?(0,s.jsx)("div",{children:(0,s.jsx)(eQ.E,{timestamp:{unix:t.timestamp},timeFormat:{showTimezone:!0}})}):""}),content:(0,s.jsxs)("div",{style:{display:"grid",gridTemplateRows:"auto auto minmax(0, 1fr)",height:"100%"},children:[(0,s.jsx)(a.x,{padding:{vertical:12,horizontal:24},border:"bottom",children:t?(0,s.jsx)(eW.c,{tick:t,tickResultType:"materializations"}):null}),(null==t?void 0:t.status)===eZ.izS.STARTED?null:(0,s.jsx)(eG.u,{tick:t})]})})});var eX=i(1026),e0=i(42530),e1=i(68313),e2=i(54602);let e3=e=>{var t;let{filterTags:i,setTableView:r}=e,{queryResult:n,paginationProps:l}=(0,e1.l)({nextCursorForResult:e=>{var t;if("Runs"===e.pipelineRunsOrError.__typename)return null===(t=e.pipelineRunsOrError.results[14])||void 0===t?void 0:t.id},getResultArray:e=>e&&"Runs"===e.pipelineRunsOrError.__typename?e.pipelineRunsOrError.results:[],variables:{filter:{tags:[...i||[],{key:"dagster/auto_materialize",value:"true"}]}},query:e2.z,pageSize:15});(0,S.C4)(n,15e3);let o=null===(t=n.data||n.previousData)||void 0===t?void 0:t.pipelineRunsOrError;return(0,s.jsxs)(a.x,{children:[(0,s.jsxs)(e4,{children:[(0,s.jsx)(a.x,{padding:{vertical:12,horizontal:24},margin:{top:32},border:"top",children:(0,s.jsx)(eq.h,{activeItems:new Set(["runs"]),buttons:[{id:"evaluations",label:"Evaluations"},{id:"runs",label:"Runs"}],onClick:e=>{r(e)}})}),(0,s.jsx)(e0.A,{runs:(null==o?void 0:o.__typename)==="Runs"?o.results:[]})]}),(0,s.jsx)("div",{style:{paddingBottom:"16px"},children:(0,s.jsx)(eX.pI,{...l})})]})},e4=b.ZP.div.withConfig({componentId:"sc-8fab7b65-0"})(["position:relative;> *:nth-child(2){position:absolute;right:0;top:0;}"]);var e8=i(54123),e5=i(69706),e9=i(88322);let e6=e=>{let{loading:t,ticks:i,tickStatus:r,setTickStatus:n,setSelectedTick:l,paginationProps:o,actionBarComponents:d}=e;return(0,s.jsxs)(a.x,{children:[(0,s.jsxs)(a.x,{flex:{justifyContent:"space-between",alignItems:"center"},padding:{vertical:12,horizontal:24},margin:{top:32},border:"top",children:[(0,s.jsxs)(a.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[d,!t||(null==i?void 0:i.length)?null:(0,s.jsx)(c.$,{purpose:"body-text"})]}),(0,s.jsx)(tt,{status:r,onChange:n})]}),(0,s.jsxs)(ti,{children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{style:{width:120},children:"Timestamp"}),(0,s.jsx)("th",{style:{width:90},children:"Status"}),(0,s.jsx)("th",{style:{width:90},children:"Duration"}),(0,s.jsx)("th",{style:{width:180},children:"Result"})]})}),(0,s.jsx)("tbody",{children:i.map((e,t)=>{let i=0!==t&&e.status===eZ.izS.STARTED&&!o.hasPrevCursor;return(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsx)(eQ.E,{timestamp:{unix:e.timestamp},timeFormat:{showTimezone:!0}})}),(0,s.jsx)("td",{children:(0,s.jsx)(e9.a,{tick:e,tickResultType:"materializations",isStuckStarted:i})}),(0,s.jsx)("td",{children:i?" - ":(0,s.jsx)(e5.Q,{startUnix:e.timestamp,endUnix:e.endTimestamp})}),(0,s.jsx)("td",{children:[eZ.izS.SKIPPED,eZ.izS.SUCCESS].includes(e.status)?(0,s.jsx)(e8.Z,{onClick:()=>{l(e)},children:(0,s.jsxs)(f.pN,{children:[e.requestedAssetMaterializationCount," materializations requested"]})}):" - "})]},e.id)})})]}),(0,s.jsx)("div",{style:{paddingBottom:"16px"},children:(0,s.jsx)(eX.pI,{...o})})]})};(r=n||(n={})).ALL="all",r.FAILED="failed",r.SUCCESS="success";let e7={all:[eZ.izS.SUCCESS,eZ.izS.FAILURE,eZ.izS.STARTED,eZ.izS.SKIPPED],failed:[eZ.izS.FAILURE],success:[eZ.izS.SUCCESS]},te=[{key:"all",label:"All ticks"},{key:"success",label:"Requested"},{key:"failed",label:"Failed"}],tt=e=>{let{status:t,onChange:i}=e,r=te.find(e=>{let{key:i}=e;return i===t});return(0,s.jsx)(g.P,{popoverProps:{position:"bottom-right"},filterable:!1,activeItem:r,items:te,itemRenderer:(e,t)=>(0,s.jsx)(v.sN,{active:t.modifiers.active,onClick:t.handleClick,text:e.label,style:{width:"300px"}},e.key),onItemSelect:e=>i(e.key),children:(0,s.jsx)(o.zx,{rightIcon:(0,s.jsx)(p.JO,{name:"arrow_drop_down"}),style:{minWidth:"200px",display:"flex",justifyContent:"space-between"},children:null==r?void 0:r.label})})},ti=(0,b.ZP)(eB.i).withConfig({componentId:"sc-1b725a66-0"})(["th,td{vertical-align:middle !important;}"]),tr=e=>{var t,i;let{setSelectedTick:r,setTimerange:l,setParentStatuses:o,actionBarComponents:a}=e,[c,u]=(0,O.q)({queryKey:"status",defaults:{status:n.ALL}}),h=(0,d.useMemo)(()=>e7[c]||e7[n.ALL],[c]),{queryResult:x,paginationProps:p}=(0,e1.l)({query:eJ,variables:{statuses:(0,d.useMemo)(()=>Array.from(h),[h])},nextCursorForResult:e=>{var t;let i=e.autoMaterializeTicks;if(i.length)return null===(t=i[14])||void 0===t?void 0:t.id},getResultArray:e=>(null==e?void 0:e.autoMaterializeTicks)?e.autoMaterializeTicks:[],pageSize:15});return(0,S.C4)(x,1e4,!p.hasPrevCursor),(0,d.useEffect)(()=>{if(p.hasPrevCursor){var e,t,i;let r=null===(e=x.data)||void 0===e?void 0:e.autoMaterializeTicks;if(r&&r.length){let e=null===(t=r[r.length-1])||void 0===t?void 0:t.timestamp,n=null===(i=r[0])||void 0===i?void 0:i.endTimestamp;e&&n&&l([e,n])}}else l(void 0)},[p.hasPrevCursor,null===(t=x.data)||void 0===t?void 0:t.autoMaterializeTicks,l]),(0,d.useEffect)(()=>{p.hasPrevCursor?o(Array.from(h)):o(void 0)},[p.hasPrevCursor,o,h]),(0,s.jsx)(e6,{loading:x.loading,ticks:(null===(i=x.data)||void 0===i?void 0:i.autoMaterializeTicks)||[],paginationProps:p,setSelectedTick:r,tickStatus:c,setTickStatus:u,actionBarComponents:a})};var tn=i(15103),ts=i(71498),tl=i(1168),to=i(5242),ta=i(47793),td=i(92237);let tc={tags:[{key:"dagster/auto_materialize",value:"true"}]},tu=()=>{var e;let t=(0,et.dx)(),{flagLegacyRunsPage:i}=(0,ts.gV)(),r=(0,tn.p)(),{permissions:{canToggleAutoMaterialize:n}={}}=(0,tl.WB)(),[l,o]=(0,d.useState)(!1),[u,h]=(0,d.useState)(void 0),[x,p]=(0,d.useState)(void 0),m=(0,d.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();return x||u?{afterTimestamp:null==x?void 0:x[0],beforeTimestamp:null==x?void 0:x[1],statuses:u}:{afterTimestamp:(e-12e5)/1e3}},[u,x]),[g,v]=(0,eT.td)(eJ),y=(0,d.useCallback)(async()=>await g({variables:m()}),[g,m]);(0,d.useEffect)(()=>{y()},[y]),(0,S.bT)({refresh:y,enabled:!l&&!x&&!u,intervalMs:2e3,leading:!0});let[w,b]=(0,d.useState)(null),[k,C]=(0,O.q)((0,d.useMemo)(()=>({queryKey:"view",decode:e=>{let{view:t}=e;return"runs"===t?"runs":"evaluations"},encode:e=>({view:e,cursor:void 0,statuses:void 0})}),[])),E=null!==(e=v.data)&&void 0!==e?e:v.previousData,T=(0,d.useMemo)(()=>(null==E?void 0:E.autoMaterializeTicks)||[],[E]),z=(0,d.useMemo)(()=>{var e;return null!==(e=null==T?void 0:T.map((e,t)=>{let i=T[t-1];if(i&&(0,ta.g6)(e,t)){let t={...e};return t.endTimestamp=i.timestamp,t.status=eZ.izS.FAILURE,t}return e}))&&void 0!==e?e:[]},[JSON.stringify(T.map(e=>"".concat(e.id,":").concat(e.status)))]),I=(0,d.useCallback)(e=>{o(!!e)},[o]),A=(0,s.jsx)(eq.h,{activeItems:new Set([k]),buttons:[{id:"evaluations",label:"Evaluations"},{id:"runs",label:"Runs"}],onClick:e=>{C(e)}});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eB.i,{children:(0,s.jsxs)("tbody",{children:[(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:"Running"}),(0,s.jsx)("td",{children:t.loading?(0,s.jsx)(c.$,{purpose:"body-text"}):(0,s.jsx)(eF.X,{format:"switch",checked:!t.paused,disabled:!n,onChange:async e=>{let i=e.target.checked;i||await r({title:"Pause Auto-materializing?",description:"Pausing Auto-materializing will prevent new materializations triggered by an Auto-materializing policy."}),t.setPaused(!i)}})})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:"Evaluation frequency"}),(0,s.jsx)("td",{children:"~30s"})]})]})}),(0,s.jsx)(a.x,{padding:{vertical:12,horizontal:24},border:"bottom",children:(0,s.jsx)(f.Tj,{children:"Evaluation timeline"})}),E?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(to.p,{ticks:z,tickResultType:"materializations",onHoverTick:I,onSelectTick:b,exactRange:x,timeRange:12e5,tickGrid:3e5,timeAfter:18e4}),(0,s.jsx)(eH,{tick:w,isOpen:!!w,close:()=>{b(null)}}),"evaluations"===k?(0,s.jsx)(tr,{setSelectedTick:b,setParentStatuses:h,setTimerange:p,actionBarComponents:A}):i?(0,s.jsx)(e3,{setTableView:C}):(0,s.jsx)(a.x,{margin:{top:32},border:"top",children:(0,s.jsx)(td.g,{filter:tc,actionBarComponents:A,includeRunsFromBackfills:!0})})]}):(0,s.jsxs)(a.x,{padding:{vertical:48},flex:{direction:"row",justifyContent:"center",gap:12,alignItems:"center"},children:[(0,s.jsx)(c.$,{purpose:"body-text"}),(0,s.jsx)("div",{style:{color:j.$()},children:"Loading evaluations…"})]})]})};var th=i(6317);let tx=()=>{let e=(0,ee.I)();switch(e){case"unknown":return(0,s.jsx)("div",{});case"has-global-amp":return(0,s.jsx)(tp,{});case"has-sensor-amp":return(0,s.jsx)(l.l_,{to:"/automation"});default:(0,th.UT)(e)}},tp=()=>((0,C.Px)(),(0,L.j)("Overview | Auto-materialize"),(0,s.jsxs)(e_.T,{children:[(0,s.jsx)(en,{tab:"amp"}),(0,s.jsx)(tu,{})]}));var tm=i(33774),tj=i(40299);let tg={[eZ.Jv3.CANCELED]:"Canceled",[eZ.Jv3.CANCELING]:"Canceling",[eZ.Jv3.COMPLETED]:"Completed",[eZ.Jv3.FAILED]:"Failed",[eZ.Jv3.REQUESTED]:"In progress",[eZ.Jv3.COMPLETED_SUCCESS]:"Success",[eZ.Jv3.COMPLETED_FAILED]:"Failed"},tv=Object.keys(eZ.Jv3).map(e=>{let t=tg[e];return{label:t,value:e,match:[e,t]}});var tf=i(22644),ty=i(12286);function tw(){let e=(0,ec._)(["\n  query InstanceBackfillsQuery($status: BulkActionStatus, $cursor: String, $limit: Int) {\n    partitionBackfillsOrError(status: $status, cursor: $cursor, limit: $limit) {\n      ... on PartitionBackfills {\n        results {\n          id\n          status\n          isValidSerialization\n          numPartitions\n          timestamp\n          partitionSetName\n          partitionSet {\n            id\n            name\n            mode\n            pipelineName\n            repositoryOrigin {\n              id\n              repositoryName\n              repositoryLocationName\n            }\n          }\n          error {\n            ...PythonErrorFragment\n          }\n\n          ...BackfillTableFragment\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return tw=function(){return e},e}let tb=()=>{(0,C.Px)(),(0,L.j)("Overview | Backfills");let[e,t]=(0,O.q)({encode:e=>({status:e.size?Array.from(e).join(","):void 0}),decode:e=>{var t;return new Set((null===(t=e.status)||void 0===t?void 0:t.split(","))||[])}}),i=(0,tj.im)({name:"Status",icon:"status",allValues:tv,allowMultipleSelections:!1,closeOnSelect:!0,renderLabel:e=>{let{value:t}=e;return(0,s.jsx)("div",{children:tg[t]})},getStringValue:e=>tg[e],state:e,onStateChanged:t}),{button:r,activeFiltersJsx:n}=(0,ty.m)({filters:[i]}),{queryResult:l,paginationProps:o}=(0,e1.l)({query:tk,variables:{status:e.size>0?Array.from(e)[0]:void 0},pageSize:10,nextCursorForResult:e=>{var t;return"PartitionBackfills"===e.partitionBackfillsOrError.__typename?null===(t=e.partitionBackfillsOrError.results[9])||void 0===t?void 0:t.id:void 0},getResultArray:e=>(null==e?void 0:e.partitionBackfillsOrError.__typename)==="PartitionBackfills"?e.partitionBackfillsOrError.results:[]}),d=(0,tf.$$)(),u=(0,S.C4)(l,S.dT),{loading:x,data:p}=l,[m,g]=(0,eo.U)("new_backfill_location_alert_final",e=>!!e);return(0,s.jsxs)(s.Fragment,{children:[m?null:(0,s.jsx)(e=>{let{setDidDismissBackfillPageAlert:t}=e;return(0,s.jsx)(a.x,{padding:8,border:"top-and-bottom",children:(0,s.jsx)(h.b,{title:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("span",{children:["In the March 6th release, backfills are moving to the"," ",(0,s.jsx)(w.rU,{to:"/runs?view=backfills",children:"Runs page"}),"."]})," ",(0,s.jsx)("span",{style:{fontWeight:"normal"},children:"The new Runs UI provides a unified view of executions as well as a dedicated Backfills list."})]}),onClose:()=>t(!0)})})},{setDidDismissBackfillPageAlert:g}),(0,s.jsxs)(a.x,{padding:{vertical:12,horizontal:20},flex:{direction:"row",alignItems:"center",justifyContent:"space-between"},children:[(0,s.jsxs)(a.x,{flex:{direction:"column",gap:8},children:[(0,s.jsx)("div",{children:r}),n]}),(0,s.jsx)(S.xi,{refreshState:u})]}),(()=>{if(x&&!p)return(0,s.jsx)(a.x,{padding:{vertical:64},flex:{direction:"column",alignItems:"center"},children:(0,s.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:8},children:[(0,s.jsx)(c.$,{purpose:"body-text"}),(0,s.jsx)("div",{style:{color:j.$()},children:"Loading backfills…"})]})});let t=null==p?void 0:p.partitionBackfillsOrError;return(null==t?void 0:t.__typename)==="PythonError"?(0,s.jsx)(k.T9,{error:t}):t&&(null==t?void 0:t.results.length)?(0,s.jsxs)("div",{children:[d?null:(0,s.jsx)(a.x,{padding:{horizontal:24,bottom:16},children:(0,s.jsx)(tf.So,{})}),(0,s.jsx)(tm.GQ,{backfills:t.results.slice(0,10),refetch:l.refetch}),t.results.length>0?(0,s.jsx)(a.x,{margin:{top:16},children:(0,s.jsx)(eX.b$,{...o})}):null]}):e.size>0?(0,s.jsx)(a.x,{padding:{vertical:64},children:(0,s.jsx)(eu.t,{icon:"no-results",title:"No matching backfills",description:"No backfills were found for this filter."})}):(0,s.jsx)(a.x,{padding:{vertical:64},children:(0,s.jsx)(eu.t,{icon:"no-results",title:"No backfills found",description:"This instance does not have any backfill jobs."})})})()]})},tk=(0,eT.Ps)(tw(),ez.B,tm.be),tS=()=>((0,C.Px)(),(0,L.j)("Overview | Backfills"),(0,s.jsxs)(e_.T,{children:[(0,s.jsx)(en,{tab:"backfills"}),(0,s.jsx)(tb,{})]}));var tC=i(59231),tE=i(56124),tT=i(42051),tz=i(47330),tI=i(29903),tA=i(56500),tR=i(87923),tP=i(73653);let tL=()=>{let{featureContext:e}=(0,d.useContext)(tR.U),{backfillId:t}=(0,l.UO)();(0,C.Px)(),(0,L.j)("Backfill | ".concat(t));let[i,r]=(0,O.q)({queryKey:"tab",defaults:{tab:"partitions"}}),n=(0,tA.ul)(t),o=(0,tf.$$)(),{data:u,error:x}=n,p=(null==u?void 0:u.partitionBackfillOrError.__typename)==="PartitionBackfill"?u.partitionBackfillOrError:null,m=!p||[eZ.Jv3.REQUESTED,eZ.Jv3.CANCELING].includes(p.status),g=(0,S.C4)(n,1e4,m);return(0,s.jsxs)(a.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,s.jsx)(G.m,{title:(0,s.jsxs)(f.X6,{children:[(0,s.jsx)(w.rU,{to:"/overview/backfills",style:{color:j.$()},children:"Backfills"})," / ",t]}),right:(0,s.jsxs)(a.x,{flex:{gap:12,alignItems:"center"},children:[m?(0,s.jsx)(S.xi,{refreshState:g}):null,p?(0,s.jsx)(tC.W,{backfill:p,refetch:n.refetch}):null]})}),function(){if(!u||!u.partitionBackfillOrError)return(0,s.jsx)(a.x,{padding:64,"data-testid":(0,tP.N)("page-loading-indicator"),children:(0,s.jsx)(c.$,{purpose:"page"})});if("PythonError"===u.partitionBackfillOrError.__typename)return(0,s.jsx)(k.T9,{error:u.partitionBackfillOrError});if("BackfillNotFoundError"===u.partitionBackfillOrError.__typename)return(0,s.jsx)(eu.t,{icon:"no-results",title:u.partitionBackfillOrError.message});let t=u.partitionBackfillOrError;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(tz.q,{backfill:t}),o?null:(0,s.jsx)(a.x,{padding:{horizontal:24,bottom:16},children:(0,s.jsx)(tf.So,{})}),(0,s.jsx)(a.x,{padding:{left:24},border:"bottom",children:(0,s.jsxs)(H.mQ,{size:"large",selectedTabId:i,children:[(0,s.jsx)(H.OK,{id:"partitions",title:"Partitions",onClick:()=>r("partitions")}),(0,s.jsx)(H.OK,{id:"runs",title:"Runs",onClick:()=>r("runs")}),e.canSeeBackfillCoordinatorLogs?(0,s.jsx)(H.OK,{id:"logs",title:"Coordinator logs",onClick:()=>r("logs")}):null]})}),(null==x?void 0:x.graphQLErrors)&&(0,s.jsx)(h.b,{intent:"error",title:x.graphQLErrors.map(e=>e.message)}),(0,s.jsxs)(a.x,{flex:{direction:"column"},style:{flex:1,position:"relative",minHeight:0},children:["partitions"===i&&(0,s.jsx)(tE.Sl,{backfill:t}),"runs"===i&&(0,s.jsx)(tI.t,{backfill:t,view:"both"}),"logs"===i&&(0,s.jsx)(tT.o,{backfill:t})]})]})}()]})},tO=()=>(0,s.jsxs)(l.rs,{children:[(0,s.jsx)(el.A,{path:"/overview/activity",isNestingRoute:!0,children:(0,s.jsx)(ed,{})}),(0,s.jsx)(el.A,{path:"/overview/jobs",render:()=>(0,s.jsx)(l.l_,{to:"/jobs"})}),(0,s.jsx)(el.A,{path:"/overview/schedules",render:()=>(0,s.jsx)(l.l_,{to:"/automation"})}),(0,s.jsx)(el.A,{path:"/overview/sensors",render:()=>(0,s.jsx)(l.l_,{to:"/automation"})}),(0,s.jsx)(el.A,{path:"/overview/automation",render:()=>(0,s.jsx)(tx,{})}),(0,s.jsx)(el.A,{path:"/overview/backfills/:backfillId",render:()=>(0,s.jsx)(tL,{})}),(0,s.jsx)(el.A,{path:"/overview/backfills",exact:!0,render:()=>(0,s.jsx)(tS,{})}),(0,s.jsx)(el.A,{path:"/overview/resources",children:(0,s.jsx)(eM,{})}),(0,s.jsx)(el.A,{path:"*",isNestingRoute:!0,render:()=>(0,s.jsx)(l.l_,{to:"/overview/activity"})})]});var tM=tO},39916:function(e,t,i){i.d(t,{S:function(){return n}});var r=i(27450);let n=e=>[...e].sort((e,t)=>{let i=(0,r.Uz)(e.repoAddress),n=(0,r.Uz)(t.repoAddress);return i.localeCompare(n)})},39282:function(e,t,i){i.d(t,{S:function(){return s}});var r=i(91987),n=i(27450);let s=e=>new Set(e.map(e=>(0,n.Uz)((0,r.kQ)(e.repository.name,e.repositoryLocation.name))))},88322:function(e,t,i){i.d(t,{a:function(){return j}});var r=i(52322),n=i(54854),s=i(38082),l=i(3217),o=i(26834),a=i(48177),d=i(54123),c=i(12597),u=i(39361),h=i(94466),x=i(2784),p=i(34515),m=i(84991);let j=e=>{let{tick:t,tickResultType:i,isStuckStarted:j}=e,[g,v]=(0,x.useState)(!1),f=(0,x.useMemo)(()=>{let e="materializations"===i?"materialization":"run";switch(t.status){case m.izS.STARTED:return(0,r.jsx)(n.V,{intent:"primary",icon:j?void 0:"spinner",children:j?"In progress":"Evaluating"});case m.izS.SKIPPED:let u=(0,r.jsx)(s.m,{fillColor:l.fk(),label:"materializations"===i?"0 materializations requested":"0 runs requested"});if("runKeys"in t&&t.runKeys.length){let e="".concat(t.runKeys.length," runs requested, but skipped because the runs already exist for the requested keys.");return(0,r.jsx)(o.u,{position:"right",content:e,children:u})}if("skipReason"in t&&t.skipReason)return(0,r.jsx)(o.u,{position:"right",content:t.skipReason,targetTagName:"div",children:u});return u;case m.izS.FAILURE:return(0,r.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:6},children:[(0,r.jsx)(n.V,{intent:"danger",children:"Failure"}),t.error?(0,r.jsx)(d.Z,{onClick:()=>{v(!0)},children:"View"}):null]});case m.izS.SUCCESS:let h="materializations"===i?t.requestedAssetMaterializationCount:t.runIds.length,x=(0,r.jsxs)(n.V,{intent:"success",children:[h," ",e,(0,c.I)(h,"","s")," requested"]});if("runKeys"in t&&t.runKeys.length>t.runIds.length){let e="".concat(t.runKeys.length," runs requested, but ").concat(t.runKeys.length-t.runIds.length," skipped because the runs already exist for those requested keys.");return(0,r.jsx)(o.u,{position:"right",content:e,children:x})}return x}},[j,t,i]);return(0,r.jsxs)(r.Fragment,{children:[f,t.error?(0,r.jsxs)(u.Vq,{isOpen:g,title:"Error",style:{width:"80vw"},children:[(0,r.jsx)(u.a7,{children:(0,r.jsx)(p.T9,{error:t.error})}),(0,r.jsx)(u.cN,{topBorder:!0,children:(0,r.jsx)(h.zx,{intent:"primary",onClick:()=>{v(!1)},children:"Close"})})]}):null]})}}}]);
//# sourceMappingURL=4028.842a5e2c27e967fe.js.map