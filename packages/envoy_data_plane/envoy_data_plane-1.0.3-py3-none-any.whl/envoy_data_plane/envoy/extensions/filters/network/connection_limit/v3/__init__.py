# Generated by the protocol buffer compiler.  DO NOT EDIT!
# sources: envoy/extensions/filters/network/connection_limit/v3/connection_limit.proto
# plugin: python-betterproto
# This file has been @generated

from dataclasses import dataclass
from datetime import timedelta
from typing import Optional

import betterproto

from ......config.core import v3 as _____config_core_v3__


@dataclass(eq=False, repr=False)
class ConnectionLimit(betterproto.Message):
    stat_prefix: str = betterproto.string_field(1)
    """
    The prefix to use when emitting :ref:`statistics
    <config_network_filters_connection_limit_stats>`.
    """

    max_connections: Optional[int] = betterproto.message_field(
        2, wraps=betterproto.TYPE_UINT64
    )
    """
    The max connections configuration to use for new incoming connections that
    are processed by the filter's filter chain. When max_connection is reached,
    the incoming connection will be closed after delay duration.
    """

    delay: timedelta = betterproto.message_field(3)
    """
    The delay configuration to use for rejecting the connection after some
    specified time duration instead of immediately rejecting the connection.
    That way, a malicious user is not able to retry as fast as possible which
    provides a better DoS protection for Envoy. If this is not present, the
    connection will be closed immediately.
    """

    runtime_enabled: "_____config_core_v3__.RuntimeFeatureFlag" = (
        betterproto.message_field(4)
    )
    """
    Runtime flag that controls whether the filter is enabled or not. If not
    specified, defaults to enabled.
    """
