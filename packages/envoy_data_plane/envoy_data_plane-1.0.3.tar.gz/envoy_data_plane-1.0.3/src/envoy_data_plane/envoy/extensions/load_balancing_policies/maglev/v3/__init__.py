# Generated by the protocol buffer compiler.  DO NOT EDIT!
# sources: envoy/extensions/load_balancing_policies/maglev/v3/maglev.proto
# plugin: python-betterproto
# This file has been @generated

from dataclasses import dataclass
from typing import Optional

import betterproto

from ...common import v3 as __common_v3__


@dataclass(eq=False, repr=False)
class Maglev(betterproto.Message):
    """
    This configuration allows the built-in Maglev LB policy to be configured
    via the LB policy extension point. See the :ref:`load balancing
    architecture overview <arch_overview_load_balancing_types>` and
    :ref:`Maglev<arch_overview_load_balancing_types_maglev>` for more
    information.
    """

    table_size: Optional[int] = betterproto.message_field(
        1, wraps=betterproto.TYPE_UINT64
    )
    """
    The table size for Maglev hashing. Maglev aims for "minimal disruption"
    rather than an absolute guarantee. Minimal disruption means that when the
    set of upstream hosts change, a connection will likely be sent to the same
    upstream as it was before. Increasing the table size reduces the amount of
    disruption. The table size must be prime number limited to 5000011. If it
    is not specified, the default is 65537.
    """

    consistent_hashing_lb_config: "__common_v3__.ConsistentHashingLbConfig" = (
        betterproto.message_field(2)
    )
    """Common configuration for hashing-based load balancing policies."""

    locality_weighted_lb_config: (
        "__common_v3__.LocalityLbConfigLocalityWeightedLbConfig"
    ) = betterproto.message_field(3)
    """Enable locality weighted load balancing for maglev lb explicitly."""
