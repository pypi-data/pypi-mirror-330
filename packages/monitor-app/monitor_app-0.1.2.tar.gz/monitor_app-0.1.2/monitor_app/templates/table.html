{% extends "base.html" %}

{% block content %}
<style>
    /* ğŸ“Œ èƒŒæ™¯ç”»åƒã‚’è¨­å®š */
    body {
        background-image: url("{{ url_for('static', filename='img/background.webp') }}");
        background-size: cover;
        background-position: center;
        background-attachment: fixed;
    }
    /* ğŸ“Œ èƒŒæ™¯ãŒé€ã‘ãªã„ã‚ˆã†ã«ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã«åŠé€æ˜ã®èƒŒæ™¯è‰²ã‚’é©ç”¨ */
    .content-container {
        background-color: rgba(255, 255, 255, 0.9); /* é€æ˜åº¦90% */
        padding: 10px 20px; /* ä¸Šä¸‹ã®ä½™ç™½ã‚’æ¸›ã‚‰ã™ */
        border-radius: 10px;
        box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.2);
    }
    /* ğŸ“Œ h2 ã®ä½™ç™½ã‚’æ¸›ã‚‰ã™ */
    .content-container h2 {
        margin-top: 5px; /* ä¸Šã®ä½™ç™½ã‚’æ¸›ã‚‰ã™ */
        margin-bottom: 5px; /* ä¸‹ã®ä½™ç™½ã‚’æ¸›ã‚‰ã™ */
        font-size: 1.8rem; /* å¿…è¦ã«å¿œã˜ã¦ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºã‚‚èª¿æ•´ */
    }
</style>

<div class="container content-container">
    <h2>{{ table_name }} ãƒ†ãƒ¼ãƒ–ãƒ«</h2>

    <div class="table-responsive">
        <table id="dataTable" class="table table-striped table-hover mt-3">
            <thead class="table-primary">
                <tr>
                    {% for col in columns %}
                        <th>{{ col }}</th>
                    {% endfor %}
                </tr>
            </thead>
            <tbody>
                {% for row in data %}
                    <tr>
                        {% for col in columns %}
                            {% set style_class = "" %}
                            {% if table_name in cell_styles and col in cell_styles[table_name] %}
                                {% set rules = cell_styles[table_name][col] %}
                                {% if row[col] is number %}
                                    {% if "greater_than" in rules and row[col] > rules["greater_than"]["value"] %}
                                        {% set style_class = rules["greater_than"]["class"] %}
                                    {% elif "less_than" in rules and row[col] < rules["less_than"]["value"] %}
                                        {% set style_class = rules["less_than"]["class"] %}
                                    {% elif "equal_to" in rules and row[col] == rules["equal_to"]["value"] %}
                                        {% set style_class = rules["equal_to"]["class"] %}
                                    {% endif %}
                                {% endif %}
                            {% endif %}
                            <td class="{{ style_class }}">{{ row[col] }}</td>
                        {% endfor %}
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<script>
    var TABLE_REFRESH_INTERVAL = {{ refresh_interval | tojson }};
</script>
<script src="{{ url_for('static', filename='js/refresh_table.js') }}"></script>

<!-- ãƒ­ãƒ¼ã‚«ãƒ«ã® DataTables ã® CSS ã‚’èª­ã¿è¾¼ã‚€ -->
<link rel="stylesheet" href="{{ url_for('static', filename='css/jquery.dataTables.min.css') }}">

<!-- ãƒ­ãƒ¼ã‚«ãƒ«ã® jQuery & DataTables ã‚’èª­ã¿è¾¼ã‚€ -->
<script src="{{ url_for('static', filename='js/jquery.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/jquery.dataTables.min.js') }}"></script>

<!-- DataTables ã®åˆæœŸåŒ–ã‚¹ã‚¯ãƒªãƒ—ãƒˆ -->
<script>
$(document).ready(function() {
    $('#dataTable').DataTable({
        paging: true,        // ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³æœ‰åŠ¹
        searching: true,     // æ¤œç´¢ãƒœãƒƒã‚¯ã‚¹æœ‰åŠ¹
        ordering: true,      // åˆ—ã‚½ãƒ¼ãƒˆæœ‰åŠ¹
        pageLength: 25,      // 1ãƒšãƒ¼ã‚¸ã‚ãŸã‚Šã®è¡¨ç¤ºæ•°
        lengthMenu: [5, 10, 25, 50, 100], // è¡¨ç¤ºä»¶æ•°ã‚ªãƒ—ã‚·ãƒ§ãƒ³
        language: {
            search: "ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼:",
            lengthMenu: "è¡¨ç¤º _MENU_ ä»¶",
            info: "å…¨ _TOTAL_ ä»¶ä¸­ _START_ ã‹ã‚‰ _END_ ã¾ã§è¡¨ç¤º",
            paginate: {
                first: "æœ€åˆ",
                last: "æœ€å¾Œ",
                next: "æ¬¡ã¸",
                previous: "å‰ã¸"
            },
            emptyTable: "ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“",
            zeroRecords: "ä¸€è‡´ã™ã‚‹ãƒ¬ã‚³ãƒ¼ãƒ‰ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“"
        }
    });
});
</script>

{% endblock %}
