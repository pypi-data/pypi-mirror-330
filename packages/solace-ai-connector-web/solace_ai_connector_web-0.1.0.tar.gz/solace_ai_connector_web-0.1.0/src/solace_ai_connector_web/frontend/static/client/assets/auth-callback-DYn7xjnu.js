import{r as s,j as e}from"./index-DOqvKUId.js";import{u,g as x}from"./ConfigProvider-BKYrVbJF.js";import{o as f}from"./index-Cx_IO0gb.js";function w(){const[o]=f(),[d,l]=s.useState(null),[n,a]=s.useState(null),{configServerUrl:h}=u();s.useEffect(()=>{(async()=>{const c=o.get("temp_code");if(!c){a("No temporary code provided");return}try{const r=await x(),i=await fetch(`${h}/exchange-temp-code`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":r??""},body:JSON.stringify({temp_code:c})}),t=await i.json();if(!i.ok)throw new Error(t.error||"Failed to exchange code");localStorage.setItem("access_token",t.access_token),localStorage.setItem("refresh_token",t.refresh_token),l(t.access_token)}catch(r){a(r.message)}})()},[o]);const m=()=>n?e.jsxs("div",{className:"text-red-500",children:[e.jsx("h2",{children:"Error"}),e.jsx("p",{children:n})]}):d?e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl",children:"Successfully Authenticated!"}),e.jsx("button",{onClick:()=>window.location.href="/",className:"bg-solace-green text-white px-6 py-2 rounded shadow hover:bg-solace-dark-green",children:"Go to Chat"})]}):e.jsx("div",{children:"Processing authentication..."});return e.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900 flex items-center justify-center",children:e.jsx("div",{className:"text-center p-8 max-w-lg",children:m()})})}export{w as default};
