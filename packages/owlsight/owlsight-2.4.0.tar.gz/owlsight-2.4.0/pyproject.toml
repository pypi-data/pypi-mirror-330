[build-system]
requires = ["setuptools", "setuptools_scm"]
build-backend = "setuptools.build_meta"

[project]
name = "owlsight"
dynamic = ["version"]
description = "Owlsight is a commandline tool which combines open-source AI models with Python functionality to create a powerful AI assistant."
authors = [{ name = "Vincent Ouwendijk" }]
license = { text = "MIT" }
readme = "README.md"
dependencies = [
    "psutil",
    "transformers",
    "pandas",
    "numpy",
    "torch",
    "bitsandbytes",
    "accelerate",
    "sentencepiece",
    "prompt_toolkit==2.0.10",
    "scikit-learn",
    "jinja2",
    "tqdm",
    "pynput",
    "dill",
    "tika",
]

[project.optional-dependencies]
dev = [
    "build",
    "twine",
    "pytest",
    "pytest-asyncio<=0.24",
    "ruff",
    "black",
]

# useful for getting leaderboards from the Hugging Face Hub
huggingface_metadata = [
    "gradio",
]

gguf = [
    "llama-cpp-python",
]

onnx = [
    "onnxruntime-genai",
    "onnxruntime-genai-cuda",
]

# useful for web search and scraping
search = [
    "lxml",
    "aiohttp",
    "duckduckgo_search",
    "sentence-transformers",
]

# for huggingface (transformers) models which require additional input like images or audio
multimodal = [
    "pytesseract",
    "pillow",
    "beautifulsoup4",
]

# for offline document reading using Apache Tika
offline = []

# more info: https://pypi.org/project/RealtimeSTT/
voice = [
    "pyaudio",
    "RealtimeSTT",
    "ctranslate2==3.24.0",
]

# Define the "all" option to include most useful features (base + optional dependencies)
all = [
    # Base dependencies
    "psutil",
    "transformers",
    "pandas",
    "numpy",
    "torch",
    "bitsandbytes",
    "accelerate",
    "sentencepiece",
    "prompt_toolkit<=2.0.10",
    "scikit-learn",
    "jinja2",
    "tqdm",
    "pynput",
    "tika",
    "lxml",
    "aiohttp",
    "duckduckgo_search",
    # Optional dependencies
    "llama-cpp-python",
    "onnxruntime-genai",
    "onnxruntime-genai-cuda",
    "sentence-transformers",
    "pytesseract",
    "beautifulsoup4",
    "pillow",
]

[tool.pytest.ini_options]
minversion = "6.0"
addopts = "-ra -q"
testpaths = ["tests"]

[project.entry-points.console_scripts]
owlsight = "owlsight.main:main"

[tool.setuptools]
package-dir = { "" = "src" }
include-package-data = true

[tool.setuptools.package-data]
"owlsight.offline" = ["blobs/**/*"]

[tool.setuptools.exclude-package-data]
"*" = ["blobs/**/*"]

[tool.setuptools.packages.find]
where = ["src"]

[tool.black]
line-length = 120

[tool.setuptools_scm]
version_scheme = "guess-next-dev"
local_scheme = "node-and-date"
