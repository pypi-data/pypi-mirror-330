/*! For license information please see 6314.ff68dd6d40f24b848153.js.LICENSE.txt */
"use strict";(self.webpackChunk_atoti_jupyterlab_extension=self.webpackChunk_atoti_jupyterlab_extension||[]).push([[6314,4389,6770,9151,5723,3933],{76314:(e,r,t)=>{t.r(r),t.d(r,{canOpenDrillthroughOnSelection:()=>g,getDrillthroughWidgetFilters:()=>x,pluginMenuItemOpenDrillthrough:()=>v});var n=t(74389),o=t(93345),i=t(95889),l=t(73387),a=t(20192),s=t(52092),u=t(86453),c=t(55613),h=t(55626),d=t(68195),m=t(667),f=t(70312);function g(e){return void 0!==e&&!(e.axes&&e.axes.length>0)&&void 0!==e.cells&&1===e.cells.length&&void 0!==e.cells[0].value}var p=t(65057),y=t(83519),b=t(16673);function _(e,r){const{dimensionName:t,hierarchyName:n}=e;return r.some((e=>(0,b.q)(e,{dimensionName:t,hierarchyName:n})))}function x({sourceWidgetFilters:e,tuple:r}){return[...(e||[]).filter((e=>!_(e,r))),...r.map((({dimensionName:e,hierarchyName:r,namePath:t})=>({type:"members",dimensionName:e,hierarchyName:r,members:[t]})))]}const v={key:"open-drillthrough",useMenuItem:e=>{const{selection:r,widgetState:t}=e,{cube:b}=(0,f.useCube)(t),{formatMessage:v}=(0,i.useIntl)(),C=(0,s.g)(),D=(0,o.useMemo)((()=>{if(g(r))return r.cells[0].tuple.filter((e=>(0,h.t)(e)||!(0,a.isTotal)((0,d.q)(e,b),e)))}),[b,r]),O=(0,o.useMemo)((()=>{if(D){const e=D.filter((e=>!(0,h.t)(e)));return v({id:"aui.plugins.menu-item.open-drillthrough.openDrillthrough"},{member:e.length>0?(0,a.getTupleCaption)(e,{captionForTotals:v({id:"aui.total"}),cube:b,separator:", ",hasOnlyCaptionForLeafLevels:!0}):void 0})}}),[v,D,b]),S=(0,o.useCallback)((async()=>{if(C&&O&&D&&(0,l.M)(e)){const r=(0,u.z)(e.dashboardState.pagesOrder),n=e.dashboardState.pagesOrder.indexOf(C),o=e.dashboardState.pages[C];if(void 0===t.query.mdx)return;const i=function({name:e,sourceWidget:r,sourceWidgetPage:t,tuple:n,cube:o}){const i=x({sourceWidgetFilters:r.filters,tuple:n}),l={mdx:(0,p.getDefaultMdxDrillthrough)(o.name)};r.query.mdx&&r.query.mdx.withClause&&(l.mdx.select.withClause=r.query.mdx.withClause);const a=(t.filters||[]).filter((e=>!_(e,n)));return{name:e,content:{0:{...y._.initialState,shouldUseDefaultColumns:!0,query:l,serverKey:r.serverKey,initialCubeName:o.name,filters:i}},layout:{direction:"column",children:[{leafKey:"0",size:1}]},filters:a}}({name:O,sourceWidget:t,sourceWidgetPage:o,tuple:D,cube:b}),l=(0,c.H)(e.dashboardState,{page:i,key:r,index:n+1});e.onDashboardChange(l),e.onActivePageChange(r)}}),[C,b,O,e,D,t]);if((0,l.M)(e)&&D&&t.query.mdx)return{icon:(0,n.Y)(m.IconDrillthrough,{}),label:O,onClick:S}},translations:{"en-US":{openDrillthrough:"Drillthrough {member, select,\n           undefined {}\n           other {on {member}}\n          }"},"fr-FR":{openDrillthrough:"Drillthrough {member, select,\n           undefined {}\n           other {sur {member}}\n          }"}}}},74389:(e,r,t)=>{t.d(r,{FD:()=>a,FK:()=>i,Y:()=>l});var n=t(65723),o=t(42369),i=(t(93345),t(77619),t(4674),t(21880),t(48785),n.Fragment);function l(e,r,t){return o.h.call(r,"css")?n.jsx(o.E,(0,o.c)(e,r),t):n.jsx(e,r,t)}function a(e,r,t){return o.h.call(r,"css")?n.jsxs(o.E,(0,o.c)(e,r),t):n.jsxs(e,r,t)}},62921:(e,r,t)=>{var n=t(93345),o=Symbol.for("react.element"),i=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,a=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function u(e,r,t){var n,i={},u=null,c=null;for(n in void 0!==t&&(u=""+t),void 0!==r.key&&(u=""+r.key),void 0!==r.ref&&(c=r.ref),r)l.call(r,n)&&!s.hasOwnProperty(n)&&(i[n]=r[n]);if(e&&e.defaultProps)for(n in r=e.defaultProps)void 0===i[n]&&(i[n]=r[n]);return{$$typeof:o,type:e,key:u,ref:c,props:i,_owner:a.current}}r.Fragment=i,r.jsx=u,r.jsxs=u},65723:(e,r,t)=>{e.exports=t(62921)}}]);