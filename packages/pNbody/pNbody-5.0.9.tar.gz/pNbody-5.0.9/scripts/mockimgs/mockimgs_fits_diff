#!/usr/bin/env python3

import argparse
from astropy.io import fits
import os
import numpy as np
  
####################################################################
# option parser
####################################################################

description="check if the content of two fits images is the same"
epilog     ="""
Examples:
--------
mockimgs_fits_diff image1.fits image2.fits
"""

parser = argparse.ArgumentParser(description=description,epilog=epilog,formatter_class=argparse.RawDescriptionHelpFormatter)





parser.add_argument(action="store", 
                    dest="files", 
                    metavar='FILE', 
                    type=str,
                    default=None,
                    nargs=2,
                    help='two files') 


                                        
                    
####################################################################
# main
####################################################################


if __name__ == '__main__':
  
  opt = parser.parse_args()
  


  hdu1 = fits.open(opt.files[0])
  data1 = hdu1[0].data

  hdu2 = fits.open(opt.files[1])
  data2 = hdu2[0].data
    
  equal = np.equal(data1,data2)
  
  if not equal.all():
    print("fits files %s and %s differ"%(opt.files[0],opt.files[1]))
  
  
  
  
  
  

