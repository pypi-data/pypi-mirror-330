#!/usr/bin/env python3

###########################################################################################
#  package:   Gtools
#  file:      pplot
#  brief:     
#  copyright: GPLv3
#             Copyright (C) 2019 EPFL (Ecole Polytechnique Federale de Lausanne)
#             LASTRO - Laboratory of Astrophysics of EPFL
#  author:    Yves Revaz <yves.revaz@epfl.ch>
#
# This file is part of Gtools.
###########################################################################################


from h5py import File
import os
import argparse


description="Get info on the Swift code that created the Swift file"
epilog     ="""
Examples:
--------
sw_getCodeInfo  file.hdf5
"""


parser = argparse.ArgumentParser(description=description,epilog=epilog,formatter_class=argparse.RawDescriptionHelpFormatter)


parser.add_argument(action="store", 
                    dest="files", 
                    metavar='FILE', 
                    type=str,
                    default=None,
                    nargs="*",
                    help='file') 




############################
#
# main
#
############################


if __name__ == '__main__':

  opt = parser.parse_args()
  
  for filename in opt.files: 
    with File(filename, "r") as fd:
      
      key = "Code"
      
      attrs = list(fd[key].attrs)
      
      for attr in attrs:
        
        if len(opt.files)>1:
          print("%s : %s = %s"%(os.path.basename(filename),attr,fd[key].attrs[attr]))
        else:
          print("%s = %s"%(attr,fd[key].attrs[attr]))  
            
  
            
            
            
            
            
          
        
        


